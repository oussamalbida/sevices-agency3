"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4863],{42397:function(e,t,n){var o=n(85893),i=n(67294),a=n(88095),r=n(77977),l=n(84093),d=n(76048);let c=(0,a.ZP)(d.Z).withConfig({componentId:"sc-a4c6e67c-0"})(["&:before{background:",";}&.dark:not(:hover){background:",";}@media (hover:hover) and (pointer:fine){&:hover{&:before{background:",";}& > .button-label{background:none;color:",";}.rpx-icon{background:",";}}}"],(0,l.H)("$backgroundColor"),r.Z.white,(0,l.H)("$hoverBackgroundColor"),(0,l.H)("$hoverTextColor"),(0,l.H)("$hoverTextColor")),u=(0,i.memo)(e=>{let{children:t,as:n="button",textColor:i="black",hoverTextColor:a="black",backgroundColor:r="white",hoverBackgroundColor:l="white",borderWidth:d=2,...u}=e;return(0,o.jsx)(c,{forwardedAs:n,variant:"outlined",color:"amazonite",borderWidth:d,textColor:i,$backgroundColor:r,$hoverBackgroundColor:l||r,$hoverTextColor:a,...u,children:t})});u.displayName="AmazoniteButton",t.Z=u},11182:function(e,t,n){n.d(t,{HG:function(){return u},Ij:function(){return s},JP:function(){return p}});var o=n(59538),i=n(24215),a=n(26629),r=n(10510);let l=async(e,t,n)=>(0,a.uz)("".concat(r.ny,"/api/v1/user/user-upload/").concat(e,"/download/").concat(t),{},{headers:{"X-CSRF-Token":n}},5);var d=n(91648),c=n(36377);let u=(e,t,n)=>{var i;if(!e)return t;if("design"===e.entity_type&&e.units){let[n,i]=(0,o.pF)(e.width,e.height,e.units);return t/(n/i)}let a="number"==typeof e.display_image_width&&e.display_image_width>0?e.display_image_width:e.width||1,r="number"==typeof e.display_image_height&&e.display_image_height>0?e.display_image_height:e.height||1;return"adsense"===e.entity_type?r/a*t+28:(null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.isPrint)&&n<d.tu?2*c.R+(t-2*c.R)*(r/a):r/a*t},s=e=>["number"==typeof(null==e?void 0:e.display_image_width)&&e.display_image_width>0?e.display_image_width:(null==e?void 0:e.width)||1,"number"==typeof(null==e?void 0:e.display_image_height)&&e.display_image_height>0?null==e?void 0:e.display_image_height:(null==e?void 0:e.height)||1],p=async(e,t)=>{try{let n=await l(e.uid,e.id,t);(null==n?void 0:n.url)&&(0,i.O)(n.url)}catch(e){console.log(e)}}},16662:function(e,t,n){var o=n(85893),i=n(67294),a=n(88095),r=n(76219),l=n(91648);let d=a.ZP.figcaption.withConfig({componentId:"sc-a5b8736e-0"})(["position:relative;width:400px;display:flex;margin-bottom:36px;","{width:360px;}","{min-height:0;width:100%;height:auto;padding:0 0 18px;margin:18px 0;display:block;}","{padding:0 0 27px;}"],l.PJ,l.JB,l.$x),c=a.ZP.div.withConfig({componentId:"sc-a5b8736e-1"})(["min-height:inherit;width:100%;padding:32px 22px 64px;","{padding:32px 18px 64px;}","{padding:24px 22px 32px;}@media (min-width:1101px) and (max-height:700px){min-height:600px;}background:",";border-radius:8px;position:relative;.upgrade-boxes{background:",";margin:28px 0 12px 0;}.publift-ad{margin-bottom:24px;.outer{background:white;}}"],l.PJ,l.JB,(0,r.rS)("palette.imageInfo.background"),(0,r.rS)("palette.imageInfo.upgradeBoxes.background")),u={},s=i.forwardRef((e,t)=>{let{children:n,innerProps:i=u,...a}=e;return(0,o.jsx)(d,{...a,ref:t,children:(0,o.jsx)(c,{...i,children:n})})});s.displayName="Wrapper",t.Z=s},18419:function(e,t,n){n.d(t,{NH:function(){return d},Ze:function(){return p},jO:function(){return s},lB:function(){return c},mo:function(){return u}});var o=n(88095),i=n(91648),a=n(77977),r=n(74480),l=n(3871);let d=(0,o.ZP)(r.Z).withConfig({componentId:"sc-930b7bf5-0"})(["background-color:",";transition:opacity 0.2s ease-in-out;height:32px;font-size:16px;padding:3px 16px 4px;border-radius:16px;width:68px;"],a.Z.clouds),c=o.ZP.img.withConfig({componentId:"sc-930b7bf5-1"})(["position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;z-index:0;object-fit:cover;"]),u=o.ZP.div.withConfig({componentId:"sc-930b7bf5-2"})(["display:inline-block;margin-bottom:72px;position:relative;text-align:center;&.save-popup-active{","{background:",";color:",";}}","{&:before{display:inline-block;padding-bottom:","%;content:'';width:100%;height:","px;}}"],d,a.Z.purple,a.Z.white,i.JB,e=>100*e.ratio,e=>e.buttonHeight||0),s=o.ZP.div.withConfig({componentId:"sc-930b7bf5-3"})(["font-size:0;white-space:nowrap;position:absolute;margin-top:10px;width:100%;display:flex;justify-content:space-between;min-width:470px;","{min-width:200px;}","{display:none;}.left-buttons,.right-buttons{display:flex;align-items:center;}","{margin-right:8px;width:28px;height:28px;transition:opacity 0.2s ease-in-out;","{display:none;}}","{","{display:none;}}.edit-button,.crop-button,.custom-text-button{","{display:none;}.rpx-icon{background-color:",";}&:hover{.rpx-icon{background-color:",";}}}.crop-button{.rpx-icon{width:16px;height:16px;margin-right:5px;}}.custom-text-button{.rpx-icon{width:15px;height:15px;margin-right:6px;}}"],i.Mq,i.ai,l.Z,i.ai,d,i.Mq,i.Mq,a.Z.purple,a.Z.white),p=o.ZP.div.withConfig({componentId:"sc-930b7bf5-4"})(["font-size:0;opacity:0;background:",";position:absolute;.image-wrapper{position:relative;.save-layer{position:absolute;inset:0;user-select:none;}.overlay-buttons{&.full{background:rgba(0,0,0,0.1);a{font-size:22px;height:54px;border-radius:28px;border-radius:27px;","{font-size:20px;height:48px;border-radius:24px;}.rpx-icon{width:22px;height:22px;","{width:20px;height:20px;}}&.magic-font{background:linear-gradient(270deg,#ffd3e7 0%,#c9fff8 100%);color:",";.rpx-icon{background:",";}&:before{display:none;}@media (hover:hover) and (pointer:fine){&:hover{background:linear-gradient(270deg,#ffc1de 0%,#b0faf0 100%);}}}}}","{display:none;}}@media (hover:hover) and (pointer:fine){&:hover{.overlay-buttons{opacity:1;}}}}@media (hover:hover) and (pointer:fine){&:hover{","{pointer-events:auto;}}}"],a.Z.clouds,i.PJ,i.PJ,a.Z.black,a.Z.black,i.Mq,c)},10752:function(e,t,n){var o=n(12519),i=n(67294),a=n(13947);let r=function(e,t,n,o){let i,a,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(e<=0||t<=0)return{display:"none",width:0,height:0};let l=n/o;!r&&n<e&&o<t?(i=o,a=n):e/t<l?i=(a=e)/l:a=(i=t)*l;let d=e/2-a/2,c=t/2-i/2;return{width:Math.round(a),height:Math.round(i),left:Math.round(d),top:Math.round(c)}};t.Z=(e,t,n,l)=>{let d=(0,a.Z)(),c=i.useRef(null),u=i.useRef(null),s=i.useRef(null),p=i.useCallback(()=>{let o=c.current,i=u.current,a=s.current,d=(l.insetRight||0)+(l.insetLeft||0),p=(l.insetBottom||0)+(l.insetTop||0),h=r(o.clientWidth-d,o.clientHeight-p,e,t,null==l?void 0:l.expand);i.style.opacity="1",i.style.width="".concat(h.width,"px"),i.style.height="".concat(h.height,"px"),i.style.left="".concat(h.left-d/2,"px"),i.style.top="".concat(h.top-d/2,"px"),l.onRatioResize&&l.onRatioResize(h.width,h.height,h.left-d/2,h.top-d/2),(null==n?void 0:n.length)&&(a.srcset=n,"function"==typeof a.removeAttribute?a.removeAttribute("src"):a.src="")},[e,t,n,l]);return(0,o.L)(()=>{p();let e=window.ResizeObserver?new ResizeObserver(()=>{p()}):null;return null==e||e.observe(c.current),window.addEventListener("resize",p,{passive:!0}),()=>{null==e||e.disconnect(),window.removeEventListener("resize",p)}},[p,d]),{wrapperRef:c,ratioRef:u,imageRef:s}}},24215:function(e,t,n){n.d(t,{O:function(){return o},u:function(){return r}});let o=e=>{window.location.assign(e)},i=null,a=()=>{if("boolean"==typeof i)return i;if("undefined"==typeof ReadableStream||"undefined"==typeof Request||"undefined"==typeof Blob||"function"!=typeof new Blob().arrayBuffer)return i=!1;try{let e=!1,t=new Request("",{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");i=e&&!t}catch(e){i=!1}return i};async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];{if(!t||(null==t?void 0:t.length)===0||!a())return window.location.assign(e),0;let h=[e,...t].filter(e=>"string"==typeof e),g=0,f=0,b=Date.now();for(;h.length>0&&Date.now()-b<3e4;){let a=Date.now(),v=h.shift();if(!v)break;let m=null,w=null,x=null,y=new AbortController;y.signal.onabort=e=>{var t;return null==e?void 0:null===(t=e.preventDefault)||void 0===t?void 0:t.call(e)};let k=setTimeout(()=>{y.signal.aborted||y.abort("Timeout. Download url is not reachable: "+v)},6500);try{(null==(m=await fetch(v,{method:"GET",signal:y.signal,credentials:n?"include":"omit"}))?void 0:m.ok)||(x=!1,console.warn({message:"File connection failed ".concat(e,": ").concat(m.status," ").concat(m.statusText)})),m.headers.has("Content-Length")&&!Number.isNaN(Number(m.headers.get("Content-Length")))&&(f=Number(m.headers.get("Content-Length")))}catch(t){y.signal.aborted?console.debug("Aborted. Timeout."):console.warn({message:"File connection failed ".concat(e,": ").concat(t.message),ok:null==m?void 0:m.ok,status:null==m?void 0:m.status,cause:null==t?void 0:t.cause}),x=!1}if(!1===x){try{clearTimeout(k),y.signal.aborted||y.abort("Done.")}catch(e){}g+=1;continue}if(!y.signal.aborted&&(null==m?void 0:m.ok)&&(null==m?void 0:m.status)===200){if(g>0||Date.now()-a>5e3)x=!0,console.debug("File connection ok. ".concat(0===g?"Triggered the original download url request, no test connection too slow. ".concat(Date.now()-a," ms."):"Triggering a mirror download url request. ".concat(Date.now()-a," ms, ").concat(g,"/").concat(t.length," mirror attempts.")));else{var i,r,l,d,c,u,s,p;let t=!(null==m?void 0:null===(i=m.body)||void 0===i?void 0:i.locked)&&(null==m?void 0:null===(l=m.body)||void 0===l?void 0:null===(r=l.getReader)||void 0===r?void 0:r.call(l));try{w=t&&await t.read()}catch(n){console.warn({message:"File read failed ".concat(e,": ").concat(m.status," ").concat(m.statusText),error:n.message}),t&&await (null==t?void 0:null===(u=t.cancel)||void 0===u?void 0:null===(c=u.call(t))||void 0===c?void 0:c.catch())}if(w&&((null==w?void 0:null===(d=w.value)||void 0===d?void 0:d.byteLength)||0)>1e3&&(x=!0,console.debug("File readable. Triggered the original download url request. ".concat(Date.now()-a," ms."))),x)try{t&&await (null==t?void 0:null===(p=t.cancel)||void 0===p?void 0:null===(s=p.call(t))||void 0===s?void 0:s.catch())}catch(e){}}try{clearTimeout(k),y.signal.aborted||y.abort("Done.")}catch(e){}if(!0===x){if(console.debug("Triggered after ".concat(Date.now()-b," ms.")),o)return f;return window.location.assign(e),f}}g+=1}return o||window.location.assign(e),f}}}}]);